!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AH=t():e.AH=t()}(this,(function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));let s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.6.3/rxjs.umd.min.js",document.head.appendChild(s),window.RXJS_BEHAVIOR_SUBJECT=new rxjs.BehaviorSubject({});const o=e=>new Promise((t,n)=>{window.RXJS_BEHAVIOR_SUBJECT.subscribe(n=>{n.requestId===e&&t(n.response)})});class r{}r.url="",r.realm="",r.hidden=!0,r.elementId="body",r.init=e=>{if(window.isListenerSet||(window.addEventListener("message",r.HandleEvent,!1),window.isListenerSet=!0),e){const{url:t,realm:n,elementId:s,hidden:o}=e;t&&n&&s?(r.url=t,r.realm=n,r.hidden=o||!1,r.elementId=s,r.frame=r.Setup(),console.log("Initialized Aheeva App Framework")):console.error("Fields: url, realm, elementId are required")}else r.frame=r.Setup(),console.log("Initialized Aheeva App Framework")},r.HandleEvent=e=>{const{eventType:t,module:n,direction:s,message:o,response:r}=e.data;if(-1==JSON.stringify({module:n,eventType:t,direction:s,message:o,response:r}).indexOf("WakeUp"))try{let e=document.createElement("div");e.innerText=`â†‘ ${(new Date).toISOString()}: ${JSON.stringify({module:n,eventType:t,direction:s,message:o,response:r})}`;let a=document.getElementById("console");a&&a.insertBefore(e,a.firstChild)}catch(e){console.error(e)}(e=>{const{direction:t,eventType:n,message:{action:s,requestId:o},response:r}=e;"incoming"===t&&"AWA_TO_APP"===n&&s&&o&&e.hasOwnProperty("response")&&window.RXJS_BEHAVIOR_SUBJECT.next({requestId:o,response:r})})({eventType:t,module:n,direction:s,message:o,response:r})},r.Setup=()=>{var e;if(r.url&&r.realm){let t=document.createElement("iframe");return t.id="aheeva_frame",t.setAttribute("sandbox","allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),t.setAttribute("allow","camera;microphone"),t.style.visibility=r.hidden?"hidden":"visible",t.style.width="100%",t.style.height="100%",t.src=`${r.url}?${r.realm}`,"body"===r.elementId?document.body.appendChild(t):null===(e=document.getElementById(r.elementId))||void 0===e||e.appendChild(t),document.getElementById(t.id).contentWindow}return window.parent},r.SendMessage=e=>{r.frame.postMessage(Object.assign(Object.assign({},e),{requester:"AheevaAppFrameWork"}),"*")},r.LoginAgent=(e,t,n)=>{r.SendMessage({requestId:n,action:"LoginAgent",message:{username:e,password:t}})},r.LogoutAgent=e=>{r.SendMessage({requestId:e,action:"LogoutAgent"})},r.GetCurrentUser=e=>(r.SendMessage({requestId:e,action:"GetCurrentUser"}),o(e)),r.SetAgentStatus=(e,t,n)=>{r.SendMessage({requestId:n,action:"SetAgentStatus",message:{status:e,reason:t}})},r.AutoConfirmExtension=e=>{r.SendMessage({requestId:e,action:"AutoConfirmExtension"})},r.HangupAllCalls=e=>{r.SendMessage({requestId:e,action:"HangupAllCalls"})},r.TransferToIVR=(e,t)=>{r.SendMessage({requestId:t,action:"TransferToIVR",message:{IVR:e}})},r.TransferToPhone=(e,t)=>{r.SendMessage({requestId:t,action:"TransferToPhone",message:{phoneNumber:e}})},r.Call=(e,t)=>{r.SendMessage({requestId:t,action:"Call",message:{phoneNumber:e}})},r.ToggleCallRecordingStatus=(e,t)=>{r.SendMessage({requestId:e,action:"ToggleCallRecordingStatus",message:{tracknum:t}})},r.ToggleCallHoldStatus=(e,t)=>{r.SendMessage({requestId:e,action:"ToggleCallHoldStatus",message:{tracknum:t}})},r.SetupConferenceCallWithAgent=(e,t)=>{r.SendMessage({requestId:t,action:"SetupConferenceCallWithAgent",message:{agentID:e}})},r.SetupConferenceCallWithPhoneNumber=(e,t)=>{r.SendMessage({requestId:t,action:"SetupConferenceCallWithPhoneNumber",message:{phoneNumber:e}})},r.LeaveConference=e=>{r.SendMessage({requestId:e,action:"LeaveConference"})},r.ClearBlockingModes=e=>{r.SendMessage({requestId:e,action:"ClearBlockingModes"})},r.GetCurrentCallList=e=>(r.SendMessage({requestId:e,action:"GetCurrentCallList"}),o(e)),r.GetCallHistory=e=>(r.SendMessage({requestId:e,action:"GetCallHistory"}),o(e)),r.AnswerNonForcedCall=(e,t)=>{r.SendMessage({requestId:e,action:"AnswerNonForcedCall",message:t})},r.RejectNonForcedCall=e=>{r.SendMessage({requestId:e,action:"RejectNonForcedCall"})},r.GetMessages=(e,t)=>(r.SendMessage({requestId:t,action:"GetMessages",message:{channelType:e}}),o(t)),r.GetAccounts=(e,t)=>(r.SendMessage({requestId:t,action:"GetAccounts",message:{channelType:e}}),o(t)),r.ComposeEmailMessage=(e,t,n,s,o,a,i,d,l)=>{r.SendMessage({requestId:l,action:"ComposeEmailMessage",message:{recipient:e,firstName:t,lastName:n,subject:s,cc:o,bcc:a,text:i,channelAccountID:d}})},r.ComposeSMSMessage=(e,t,n,s,o,a)=>{r.SendMessage({requestId:a,action:"ComposeSMSMessage",message:{recipient:e,firstName:t,lastName:n,channelAccountID:o,text:s}})},r.MarkInteractionAsRead=(e,t)=>{r.SendMessage({requestId:t,action:"MarkInteractionAsRead",message:{interactionID:e}})},r.AddInteraction=(e,t,n,s,o)=>{r.SendMessage({requestId:o,action:"AddInteraction",message:{threadID:e,interactionID:t,to:n,text:s}})},r.GetDispositionList=e=>(r.SendMessage({requestId:e,action:"GetDispositionList"}),o(e)),r.SetDisposition=(e,t,n)=>{r.SendMessage({requestId:n,action:"SetDisposition",message:{threadID:t,dispositionID:e}})}}]).default}));